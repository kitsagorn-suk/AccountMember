@*@model IEnumerable<account.Database.bill_transaction_detail>*@
@using PagedList.Mvc;
@model PagedList.IPagedList<account.Database.bill_confirm_slip>


@Html.Hidden("ShowImg", @Url.Action("ShowImg", "Quotation"))


        Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

        @Html.PagedListPager(Model, page => Url.Action("History",
       new { page,sortOrder = ViewBag.CurrentSort,currentFilter = ViewBag.CurrentFilter}))
        <table class="table table-border" id="ShowHistory">
            <thead>
                <tr>
                    <th set-lan="text:ID"></th>
                    <th set-lan="text:Upload Date"></th>
                    <th set-lan="text:Amount"></th>
                    <th set-lan="text:SF"></th>
                </tr>
            </thead>
            <tbody>
                @{var count = 1; }
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@count</td>
                        <td>@item.create_date.ToString("dd/MM/yyyy")</td>
                        <td style="text-align:center">@item.amount.ToString("0,000.00")</td>
                        @*<td style="text-align:center"><a href="~/SlipImg/@item.slip" target="_blank" class="btn btn-green fa fa-file-image-o"></a></td>*@
                        <td style="text-align:center"><a class="btn btn-green fa fa-file-image-o" id="viewbtn" value="@item.id" data-toggle="modal" data-target="#showmodal" ></a></td>
                    </tr>
                    count++;
                }

        </table>
      
        <div id="showmodal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">

            </div>
        </div>

<script>
    $("#ShowHistory").on("click", "#viewbtn", function () {
        var id = $('#viewbtn').val();
        var urlAction = $('#ShowImg').val();
        console.log(urlAction);
        $.ajax({
            type: "GET",
            url: urlAction,
            data: {
                id: id,
            },
            contentType: "application/json; charset=utf-8",
            datatype: "json",  
            success: function (data) {
                $("#showmodal .modal-dialog").html(data);
                $("#showmodal").modal("show");
            },
            error: function () {
                alert("Dynamic content load failed.");
            }  
        });

        $("#closbtn").click(function () {
            $('#myModal').modal('hide');
        });
    });
</script>

